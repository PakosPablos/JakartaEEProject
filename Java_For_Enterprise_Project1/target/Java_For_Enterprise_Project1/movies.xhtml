<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core">


<h:head>
    <title>Manage Movies</title>
</h:head>

<h:body>

    <h1>Manage Movies</h1>

    <!-- ================= Add movie ================= -->
    <h2>Add a new movie</h2>
    <h:form>

        <h:panelGrid columns="2">

            <h:outputLabel for="title" value="Title:" />
            <h:inputText id="title"
                         value="#{movieBean.newMovie.title}"
                         required="true" />

            <h:outputLabel for="year" value="Release year:" />
            <h:inputText id="year"
                         value="#{movieBean.newMovie.releaseYear}" />

            <h:outputLabel for="genre" value="Genre:" />
            <h:inputText id="genre"
                         value="#{movieBean.newMovie.genre}" />

            <h:outputLabel for="runtime" value="Runtime (min):" />
            <h:inputText id="runtime"
                         value="#{movieBean.newMovie.runtimeMinutes}" />

            <h:outputLabel for="director" value="Director:" />
            <h:selectOneMenu id="director"
                             value="#{movieBean.selectedDirectorId}">
                <f:selectItem itemLabel="-- Select director --"
                              itemValue="#{null}"
                              noSelectionOption="true" />
                <f:selectItems value="#{movieBean.allPeople}"
                               var="p"
                               itemValue="#{p.id}"
                               itemLabel="#{p.fullName}" />
            </h:selectOneMenu>

        </h:panelGrid>

        <br />

        <h:commandButton value="Save movie"
                         action="#{movieBean.saveMovie}" />
    </h:form>

    <hr/>

    <!-- ================= Search movies ================= -->
    <h2>Search movies</h2>
    <h:form>

        <h:panelGrid columns="2">

            <h:outputLabel for="sTitle" value="Title contains:" />
            <h:inputText id="sTitle"
                         value="#{movieBean.searchTitle}" />

            <h:outputLabel for="sYear" value="Release year:" />
            <h:inputText id="sYear"
                         value="#{movieBean.searchReleaseYear}" />

            <h:outputLabel for="sGenre" value="Genre contains:" />
            <h:inputText id="sGenre"
                         value="#{movieBean.searchGenre}" />

            <h:outputLabel for="sDir" value="Director name contains:" />
            <h:inputText id="sDir"
                         value="#{movieBean.searchDirectorName}" />

            <h:outputLabel for="sActor" value="Actor name contains:" />
            <h:inputText id="sActor"
                         value="#{movieBean.searchActorName}" />
        </h:panelGrid>

        <h:commandButton value="Search"
                         action="#{movieBean.search}" />

        <br/><br/>

        <h:dataTable value="#{movieBean.searchResults}"
                     var="m"
                     borde="1"
                     rendered="#{not empty movieBean.searchResults}">

            <h:column>
                <f:facet name="header">Title</f:facet>
                #{m.title}
            </h:column>

            <h:column>
                <f:facet name="header">Year</f:facet>
                #{m.releaseYear}
            </h:column>

            <h:column>
                <f:facet name="header">Genre</f:facet>
                #{m.genre}
            </h:column>

            <h:column>
                <f:facet name="header">Director</f:facet>
                #{m.director.fullName}
            </h:column>

            <h:column>
                <f:facet name="header">Actions</f:facet>
                <h:commandButton value="Delete"
                                 action="#{movieBean.removeMovie(m)}"
                                 onclick="return confirm('Delete this movie?');" />
            </h:column>

        </h:dataTable>

    </h:form>

</h:body>
</html>
