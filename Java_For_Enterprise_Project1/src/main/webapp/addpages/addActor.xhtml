<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core">

<h:head>
    <title>Add actor to movie</title>
    <link rel="stylesheet" type="text/css"
          href="#{request.contextPath}/resources/css/app.css"/>
</h:head>

<h:body>
    <div class="top-link">
        <h:link outcome="addpages/addMenu" value="Back to add menu"/>
    </div>

    <div class="page-wrapper">
        <h2 class="page-title">Assign actor to movie</h2>
        <div class="page-subtitle">
            Choose an existing person and movie to create an actor entry.
        </div>

        <h:form>
            <div class="content-row">

                <div class="panel panel-left">
                    <div class="panel-title">Input</div>

                    <div class="form-grid">
                        <h:outputLabel for="movie" value="Movie:" />
                        <h:selectOneMenu id="movie"
                                         value="#{actorBean.selectedMovieId}">
                            <f:selectItem itemLabel="-- Select movie --"
                                          itemValue="#{null}"
                                          noSelectionOption="true"/>
                            <f:selectItems value="#{actorBean.movies}"
                                           var="m"
                                           itemValue="#{m.id}"
                                           itemLabel="#{m.title} (#{m.releaseYear})"/>
                        </h:selectOneMenu>

                        <h:outputLabel for="person" value="Person:" />
                        <h:selectOneMenu id="person"
                                         value="#{actorBean.selectedPersonId}">
                            <f:selectItem itemLabel="-- Select person --"
                                          itemValue="#{null}"
                                          noSelectionOption="true"/>
                            <f:selectItems value="#{actorBean.people}"
                                           var="p"
                                           itemValue="#{p.id}"
                                           itemLabel="#{p.surname} #{p.name}"/>
                        </h:selectOneMenu>

                        <h:outputLabel for="billing" value="Billing order:" />
                        <h:inputText id="billing"
                                     value="#{actorBean.billingOrder}"/>
                    </div>

                    <div class="btn-bar">
                        <h:commandButton styleClass="btn-small"
                                         value="Add actor to movie"
                                         action="#{actorBean.addActorToMovie}"/>
                    </div>
                </div>

                <div class="panel panel-right">
                    <div class="panel-title">Current actors</div>

                    <h:dataTable value="#{actorBean.assignments}"
                                 var="a"
                                 rendered="#{not empty actorBean.assignments}">
                        <h:column>
                            <f:facet name="header">Movie</f:facet>
                            #{a.movie.title}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Year</f:facet>
                            #{a.movie.releaseYear}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Actor</f:facet>
                            #{a.person.surname} #{a.person.name}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Billing</f:facet>
                            #{a.billingOrder}
                        </h:column>
                    </h:dataTable>

                    <h:panelGroup rendered="#{empty actorBean.assignments}">
                        No actors have been assigned to movies yet.
                    </h:panelGroup>
                </div>

            </div>
        </h:form>
    </div>
</h:body>
</html>
